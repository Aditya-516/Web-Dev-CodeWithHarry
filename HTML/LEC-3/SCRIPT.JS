// Smooth fade-in animation
const faders = document.querySelectorAll('.fade-in');
const appearOptions = { threshold: 0.2 };

const appearOnScroll = new IntersectionObserver((entries, obs) => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    entry.target.classList.add('show');
    obs.unobserve(entry.target);
  });
}, appearOptions);

faders.forEach(fader => appearOnScroll.observe(fader));

// Dark Mode Toggle
const toggleBtn = document.getElementById("theme-toggle");
toggleBtn.addEventListener("click", () => {
  document.body.classList.toggle("dark");
  toggleBtn.textContent = document.body.classList.contains("dark") 
    ? "‚òÄÔ∏è Light Mode" : "üåô Dark Mode";
});

// Contact Form ‚Üí Send to backend
const form = document.getElementById("contact-form");
const status = document.getElementById("form-status");

form.addEventListener("submit", async e => {
  e.preventDefault();

  const formData = {
    name: document.getElementById("name").value,
    email: document.getElementById("email").value,
    msg: document.getElementById("msg").value,
  };

  try {
    const res = await fetch("/contact", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData),
    });

    const data = await res.json();
    if (data.success) {
      status.textContent = "‚úÖ Message sent successfully!";
      form.reset();
    } else {
      status.textContent = "‚ùå Something went wrong.";
    }
  } catch (err) {
    status.textContent = "‚ö†Ô∏è Server error.";
    console.error(err);
  }
});
